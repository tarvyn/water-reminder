(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,r){e.exports=r("UXeq")},UXeq:function(e,t,r){"use strict";r.r(t);var a,n=r("pWtc"),o=r("2r+5"),i=r("Fpi0"),s=r("GrmC"),c=r("OqRz"),l=r("sj3V"),u=r("v2iy"),p=r("9S1i");!function(e){e.Login="[Auth] Login",e.LoginSuccess="[Auth] Login success",e.LoginError="[Auth] Login error",e.Logout="[Auth] Logout",e.LogoutSuccess="[Auth] Logout success",e.LogoutError="[Auth] Logout error",e.SignUp="[Auth] Sign up",e.SignUpSuccess="[Auth] Sign up success",e.SignUpError="[Auth] Sign up error",e.GetUser="[Auth] Get user",e.GetUserSuccess="[Auth] Get user success",e.GetUserError="[Auth] Get user error"}(a||(a={}));var m={signUp:e=>({type:a.SignUp,payload:{signUpData:e}}),signUpSuccess:e=>({type:a.SignUpSuccess,payload:{user:e}}),signUpError:e=>({type:a.SignUpError,payload:{errorMessage:e}}),login:e=>({type:a.Login,payload:{loginData:e}}),loginSuccess:e=>({type:a.LoginSuccess,payload:{user:e}}),loginError:e=>({type:a.LoginError,payload:{errorMessage:e}}),logout:()=>({type:a.Logout}),logoutSuccess:()=>({type:a.LogoutSuccess}),logoutError:e=>({type:a.LogoutError,payload:{errorMessage:e}}),getUser:()=>({type:a.GetUser}),getUserSuccess:e=>({type:a.GetUserSuccess,payload:{user:e}}),getUserError:e=>({type:a.GetUserError,payload:{errorMessage:e}})},d="/api",g=r("Pn29"),b=r("Sppo"),y=r("n7R1");function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(){return e=>e.pipe(Object(y.a)(e=>e.ok?e.json():Object(g.a)(e.json()).pipe(Object(y.a)(t=>500===e.status?Object(b.a)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(r,!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t,{message:"Some error has occurred"})):Object(b.a)(t)))))}var j,S=r("4u3f"),v=r("BMjR"),E=new class{constructor(){this.url="".concat(d,"/auth")}signUp(e){return Object(S.fromFetch)("".concat(this.url,"/sign-up"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).pipe(h(),Object(v.a)())}login(e){return Object(S.fromFetch)("".concat(this.url,"/login"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).pipe(h(),Object(v.a)())}logout(){return Object(S.fromFetch)("".concat(this.url,"/logout"),{method:"POST"}).pipe(h(),Object(v.a)())}},w=new class{constructor(){this.url="".concat(d,"/user")}getUser(){return Object(S.fromFetch)(this.url).pipe(h(),Object(v.a)())}updateUserSubscription(e){return Object(S.fromFetch)("".concat(this.url,"/update-push-subscription"),{method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).pipe(h(),Object(v.a)())}updateUser(e){return Object(S.fromFetch)(this.url,{method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).pipe(h(),Object(v.a)())}},D=r("52Hf"),k=Object(D.a)(),P=r("qfCs");function T(){return e=>t=>t.pipe(Object(P.a)(t=>t.type===e))}!function(e){e.GetSettingsSuccess="[Settings] Get settings success",e.SetAwakeTime="[Settings] Set awake time",e.SetAwakeTimeSuccess="[Settings] Set awake time success",e.SetAwakeTimeError="[Settings] Set awake time error",e.SetSleepTime="[Settings] Set sleep time",e.SetSleepTimeSuccess="[Settings] Set sleep time success",e.SetSleepTimeError="[Settings] Set sleep time error"}(j||(j={}));var x={getSettingsSuccess:e=>({type:j.GetSettingsSuccess,payload:e}),setAwakeTime:e=>({type:j.SetAwakeTime,payload:{awakeTime:e}}),setAwakeTimeSuccess:()=>({type:j.SetAwakeTimeSuccess}),setAwakeTimeError:e=>({type:j.SetAwakeTimeError,payload:{awakeTime:e}}),setSleepTime:e=>({type:j.SetSleepTime,payload:{sleepTime:e}}),setSleepTimeSuccess:()=>({type:j.SetSleepTimeSuccess}),setSleepTimeError:e=>({type:j.SetSleepTimeError,payload:{sleepTime:e}})};function U(e,t,r,a,n,o,i){try{var s=e[o](i),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(a,n)}function N(){var e;return e=function*(e){try{return[void 0,yield e]}catch(t){return[t,void 0]}},(N=function(){var t=this,r=arguments;return new Promise(function(a,n){var o=e.apply(t,r);function i(e){U(o,a,n,i,s,"next",e)}function s(e){U(o,a,n,i,s,"throw",e)}i(void 0)})}).apply(this,arguments)}function C(){return new Date}var L,G,I=r("zdbI"),A=r("oQV/"),H=r("0Lk3"),M=r("vnL/"),F=r("b9/G"),W=r("cz6e");function R(e,t,r,a,n,o,i){try{var s=e[o](i),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(a,n)}function _(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var o=e.apply(t,r);function i(e){R(o,a,n,i,s,"next",e)}function s(e){R(o,a,n,i,s,"throw",e)}i(void 0)})}}!function(e){e[e.closed=0]="closed",e[e.opened=1]="opened",e[e.untouched=2]="untouched"}(L||(L={})),Object.keys(L),function(e){e[e.cup=200]="cup"}(G||(G={}));var q=function(){var e=_(function*(){if("granted"===(yield Notification.requestPermission())){var e=yield navigator.serviceWorker.ready,t=(e=>{for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(t),a=new Uint8Array(r.length),n=0;n<r.length;++n)a[n]=r.charCodeAt(n);return a})("BO0o6h3SswzEA4tJ5VOn_GJQPy16gHmq5pRfawdpslYLd967NEpKhfnw65uQvo0rOoKGupkd2C86CEemNORY4WI");return yield e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})}});return function(){return e.apply(this,arguments)}}(),B=function(){var e=_(function*(){var e=yield q();if(null===e)throw new Error("Not subscribed to push service!");return yield w.updateUserSubscription(e).toPromise()});return function(){return e.apply(this,arguments)}}(),z=T(),J=Object(I.a)(e=>e.pipe(z(a.SignUp),Object(y.a)(e=>{var{payload:{signUpData:t}}=e;return E.signUp(t).pipe(Object(M.a)(e=>m.signUpSuccess(e)),Object(F.a)(()=>k.push("/")),Object(W.a)(e=>Object(A.a)(m.signUpError(e.message))))})),e=>e.pipe(z(a.Login),Object(y.a)(e=>{var{payload:{loginData:t}}=e;return E.login(t).pipe(Object(y.a)(e=>[m.loginSuccess(e),x.getSettingsSuccess(e)]),Object(F.a)(()=>k.push("/")),Object(W.a)(e=>Object(A.a)(m.loginError(e.message))))})),e=>e.pipe(z(a.GetUser),Object(y.a)(()=>w.getUser().pipe(Object(y.a)(e=>[m.getUserSuccess(e),x.getSettingsSuccess(e)]),Object(W.a)(e=>(k.push("/sign-in"),Object(A.a)(m.getUserError(e.toString()))))))),e=>e.pipe(z(a.Logout),Object(y.a)(()=>E.logout().pipe(Object(M.a)(()=>m.logoutSuccess()),Object(F.a)(()=>k.push("/sign-in")),Object(W.a)(e=>Object(A.a)(m.logoutError(e.toString())))))),e=>e.pipe(Object(P.a)(e=>[a.LoginSuccess,a.GetUserSuccess].includes(e.type)),Object(y.a)(()=>Object(g.a)(B()).pipe(Object(y.a)(()=>H.a),Object(W.a)(()=>H.a)))),e=>e.pipe(Object(P.a)(e=>[a.LoginSuccess,a.GetUserSuccess].includes(e.type)),Object(y.a)(()=>Object(g.a)(w.updateUser({timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,awakeTime:9.5,sleepTime:23.5})).pipe(Object(y.a)(()=>H.a),Object(W.a)(()=>H.a))))),Z={loggedIn:!1,loginInErrorMessage:void 0,signUpErrorMessage:void 0,user:void 0};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(r,!0).forEach(function(t){Q(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X,Y={actions:m,epics:J,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SignUp:return V({},e,{signUpErrorMessage:void 0});case a.SignUpSuccess:return V({},e,{loggedIn:!0,user:t.payload.user});case a.SignUpError:return V({},e,{signUpErrorMessage:t.payload.errorMessage});case a.Login:return V({},e,{loginInErrorMessage:void 0});case a.LoginSuccess:return V({},e,{loggedIn:!0,user:t.payload.user});case a.LoginError:return V({},e,{loggedIn:!1,loginInErrorMessage:t.payload.errorMessage});case a.Logout:case a.LogoutSuccess:return V({},e,{loggedIn:!1});case a.LogoutError:return V({},e,{loggedIn:!0});case a.GetUserSuccess:return V({},e,{loggedIn:!0,user:t.payload.user});case a.GetUserError:return V({},e,{loggedIn:!1,user:void 0});default:return e}},initialState:Z};!function(e){e.GetDoses="[Hydration] get doses",e.GetDosesSuccess="[Hydration] get doses success",e.GetDosesError="[Hydration] get doses error",e.CreateDose="[Hydration] create dose",e.CreateDoseSuccess="[Hydration] create dose success",e.CreateDoseError="[Hydration] create dose error",e.DeleteDose="[Hydration] delete dose",e.DeleteDoseSuccess="[Hydration] delete dose success",e.DeleteDoseError="[Hydration] delete dose error",e.GetHydrationStatistics="[Hydration] delete hydration statistics",e.GetHydrationStatisticsSuccess="[Hydration] delete hydration statistics success",e.GetHydrationStatisticsError="[Hydration] delete hydration statistics error"}(X||(X={}));var $={getDoses:()=>({type:X.GetDoses}),getDosesSuccess:e=>({type:X.GetDosesSuccess,payload:{doses:e}}),getDosesError:e=>({type:X.GetDosesError,payload:{errorMessage:e}}),getHydrationStatistics:()=>({type:X.GetHydrationStatistics}),getHydrationStatisticsSuccess:e=>({type:X.GetHydrationStatisticsSuccess,payload:{monthlyStatistics:e}}),getHydrationStatisticsError:e=>({type:X.GetHydrationStatisticsError,payload:{errorMessage:e}}),createDose:e=>({type:X.CreateDose,payload:e}),createDoseSuccess:e=>({type:X.CreateDoseSuccess,payload:{dose:e}}),createDoseError:e=>({type:X.CreateDoseError,payload:{errorMessage:e}}),deleteDose:e=>({type:X.DeleteDose,payload:{id:e}}),deleteDoseSuccess:e=>({type:X.DeleteDoseSuccess,payload:{id:e}}),deleteDoseError:e=>({type:X.DeleteDoseError,payload:{errorMessage:e}})},ee=r("KpGu"),te=r("eBlR"),re=r("i5Fr"),ae=new class{constructor(){this.url="".concat(d,"/hydration")}getDoses(){var e=new URLSearchParams({from:Object(ee.a)(new Date).toISOString()});return Object(S.fromFetch)("".concat(this.url,"/doses?").concat(e)).pipe(h(),Object(v.a)())}getHydrationStatistics(){var e=new URLSearchParams({from:Object(te.a)(C()).toISOString(),to:Object(re.a)(C()).toISOString()});return Object(S.fromFetch)("".concat(this.url,"/statistics?").concat(e)).pipe(h(),Object(v.a)())}createDose(e){return Object(S.fromFetch)("".concat(this.url,"/doses"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).pipe(h(),Object(v.a)())}deleteDose(e){return Object(S.fromFetch)("".concat(this.url,"/doses/").concat(e),{method:"DELETE"}).pipe(Object(M.a)(()=>void 0),Object(v.a)())}},ne=r("v0uk");function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var se=T(),ce=Object(I.a)(e=>e.pipe(se(X.GetDoses),Object(y.a)(()=>ae.getDoses().pipe(Object(M.a)(e=>$.getDosesSuccess(e.map(e=>(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(r,!0).forEach(function(t){ie(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e})({},e,{time:new Date(e.time)})))),Object(W.a)(e=>Object(A.a)($.getDosesError(e.toString())))))),e=>e.pipe(se(X.GetHydrationStatistics),Object(y.a)(()=>ae.getHydrationStatistics().pipe(Object(M.a)(e=>$.getHydrationStatisticsSuccess(e)),Object(W.a)(e=>Object(A.a)($.getHydrationStatisticsError(e.toString())))))),e=>e.pipe(se(X.CreateDose),Object(ne.a)(e=>{var{payload:{time:t,volume:r}}=e;return ae.createDose({time:t.toISOString(),volume:r}).pipe(Object(M.a)(e=>$.createDoseSuccess(e)),Object(W.a)(e=>Object(A.a)($.createDoseError(e.toString()))))})),e=>e.pipe(se(X.DeleteDose),Object(ne.a)(e=>{var{payload:{id:t}}=e;return ae.deleteDose(t).pipe(Object(M.a)(()=>$.deleteDoseSuccess(t)),Object(W.a)(e=>Object(A.a)($.deleteDoseError(e.toString()))))}))),le=r("WT5B"),ue={isLoading:!0,doses:void 0,monthlyStatistics:[]};function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(r,!0).forEach(function(t){de(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge,be={actions:$,epics:ce,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X.GetDoses:return me({},e,{isLoading:!0});case X.GetDosesSuccess:return me({},e,{doses:t.payload.doses});case X.GetHydrationStatisticsSuccess:return me({},e,{monthlyStatistics:t.payload.monthlyStatistics});case X.CreateDose:return me({},e,{doses:(e.doses||[]).concat([me({},t.payload,{userId:t.payload.userId,_id:Math.random().toString()})])});case X.CreateDoseSuccess:return me({},e,{doses:e.doses.map(e=>{var{time:r,_id:a}=t.payload.dose;return Object(le.a)(e.time,new Date(r))?me({},e,{_id:a}):e})});case X.DeleteDose:return me({},e,{doses:e.doses.filter(e=>e._id!==t.payload.id)});default:return e}},initialState:ue},ye=new class{constructor(){this.url="".concat(d,"/reminder")}updateNextDrinkTime(){return Object(S.fromFetch)("".concat(this.url,"/next-drink-time"),{method:"PATCH",headers:{"Content-Type":"application/json"}}).pipe(h(),Object(v.a)())}};(ge||(ge={})).CalculateNextDrinkTimeSuccess="[Reminder] Calculate next drink time success";var Oe={calculateNextDrinkTimeSuccess:e=>{var{nextDrinkTime:t}=e;return{type:ge.CalculateNextDrinkTimeSuccess,payload:{nextDrinkTime:t}}}},fe=Object(I.a)(e=>e.pipe(Object(P.a)(e=>[a.LoginSuccess,a.GetUserSuccess,a.SignUpSuccess,X.CreateDoseSuccess,X.DeleteDoseSuccess].includes(e.type)),Object(ne.a)(()=>Object(g.a)(ye.updateNextDrinkTime()).pipe(Object(M.a)(e=>Oe.calculateNextDrinkTimeSuccess(e)),Object(W.a)(()=>H.a))))),he={nextDrinkTime:void 0};function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ve={actions:Oe,epics:fe,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge.CalculateNextDrinkTimeSuccess:return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(r,!0).forEach(function(t){Se(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{nextDrinkTime:new Date(t.payload.nextDrinkTime)});default:return e}},initialState:he},Ee={awakeTime:void 0,sleepTime:void 0},we=T(),De=Object(I.a)(e=>e.pipe(we(j.SetAwakeTime),Object(ne.a)(e=>{var{payload:{awakeTime:t}}=e;return w.updateUser({awakeTime:t}).pipe(Object(M.a)(()=>x.setAwakeTimeSuccess()),Object(W.a)(()=>Object(A.a)(x.setAwakeTimeError(t))))})),e=>e.pipe(we(j.SetSleepTime),Object(ne.a)(e=>{var{payload:{sleepTime:t}}=e;return w.updateUser({sleepTime:t}).pipe(Object(M.a)(()=>x.setSleepTimeSuccess()),Object(W.a)(()=>Object(A.a)(x.setSleepTimeError(t))))})));function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(r,!0).forEach(function(t){Te(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xe={actions:x,epics:De,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.GetSettingsSuccess:var{awakeTime:r,sleepTime:a}=t.payload;return Pe({},e,{awakeTime:r,sleepTime:a});case j.SetAwakeTime:case j.SetAwakeTimeError:return Pe({},e,{awakeTime:t.payload.awakeTime});case j.SetSleepTime:case j.SetSleepTimeError:return Pe({},e,{sleepTime:t.payload.sleepTime});default:return e}},initialState:Ee},Ue=Object(I.a)(Y.epics,be.epics,ve.epics,xe.epics),Ne=r("B6mr");function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(r,!0).forEach(function(t){Ge(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ie,Ae,He,Me={form:void 0,auth:Y.initialState,hydration:be.initialState,reminder:ve.initialState,settings:xe.initialState},Fe=Object(u.c)({form:Ne.a,hydration:be.reducer,auth:Y.reducer,reminder:ve.reducer,settings:xe.reducer}),We=(Ie=Object(p.a)(),Ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,He=Object(u.e)((e,t)=>t.type===a.Logout?Fe(Me,t):Fe(e,Le({},t,{payload:"object"==typeof t.payload?Le({},t.payload||{},{userId:e&&e.auth&&e.auth.user&&e.auth.user._id}):t.payload})),Ae(Object(u.a)(Ie))),Ie.run(Ue),He),Re=r("r0ML"),_e=r.n(Re),qe=r("+Q0i"),Be=r.n(qe),ze=r("g0xT"),Je=r("lkLo"),Ze=r("iipw"),Ke=r("Qmnn"),Ve=r("FR3G"),Qe=r("SlkP"),Xe=r("cxi7"),Ye=r("3Pv6"),$e=r("2sP0"),et=r("LrN8"),tt=r("uNrZ"),rt=r("QD+E"),at=_e.a.forwardRef((e,t)=>_e.a.createElement(rt.a,Object.assign({innerRef:t},e))),nt=r("CGse"),ot=e=>{var{input:t,meta:{touched:r,invalid:a,error:n}}=e,o=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(r=o[a])>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t.indexOf(r=o[a])>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["input","meta"]);return _e.a.createElement(nt.a,Object.assign({error:r&&a,helperText:r&&n},t,o))},it=e=>/^(?=.{1,50}$)[a-z]+(?:['_.\s][a-z]+)*$/i.test(e),st=e=>/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e),ct=e=>!(e.length<8)&&[/[A-Z]/.test(e),/[a-z]/.test(e),/\d/.test(e),/\W/.test(e)].filter(Boolean).length>=3,lt=r("NaR3"),ut=r("Mk8u"),pt=Object(Ke.a)(e=>({form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}})),mt=Object(ut.a)({form:"sign-in",initialValues:{password:null,email:null},validate:e=>{var t={};return["email","password"].forEach(r=>{e[r]||(t[r]="Field is required")}),e.email&&!st(e.email)&&(t.email="Invalid email address"),e.password&&!ct(e.password)&&(t.password="Password is not complex enough"),t}})(e=>{var{handleSubmit:t,errorMessage:r,pristine:a,invalid:n}=e,o=pt(void 0);return _e.a.createElement("form",{className:o.form,noValidate:!0,onSubmit:t},_e.a.createElement(lt.a,{component:ot,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),_e.a.createElement(lt.a,{component:ot,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r&&_e.a.createElement(Ye.a,{component:"span",variant:"caption",color:"error"},r),_e.a.createElement($e.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",className:o.submit,disabled:a||n},"Sign In"))}),dt=Object(Ke.a)(e=>({"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},submit:{margin:e.spacing(3,0,2)},signUpLink:{marginLeft:"auto"}})),gt=()=>{var e=dt(void 0),t=Object(ze.d)(e=>e.auth.loginInErrorMessage),r=Object(ze.c)();return _e.a.createElement(Qe.a,{component:"main",maxWidth:"xs"},_e.a.createElement("div",{className:e.paper},_e.a.createElement(Xe.a,{className:e.avatar},_e.a.createElement(tt.a,null)),_e.a.createElement(Ye.a,{component:"h1",variant:"h5"},"Sign in"),_e.a.createElement(mt,{errorMessage:t,onSubmit:e=>{r(m.login(e))}}),_e.a.createElement($e.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:()=>{window.open("/api/auth/login/google","_self")}},"Sign In With Google"),_e.a.createElement(et.a,{className:e.signUpLink,component:at,to:"/sign-up"},"Donâ€™t have an account? Sign Up")))},bt=r("5U2p"),yt=Object(Ke.a)(e=>({form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}})),Ot=Object(ut.a)({form:"sign-up",validate:e=>{var t={};return["firstName","lastName","email","password"].forEach(r=>{e[r]||(t[r]="Field is required")}),e.email&&!st(e.email)&&(t.email="Invalid email address"),e.password&&!ct(e.password)&&(t.password="Password is not complex enough"),e.firstName&&!it(e.firstName)&&(t.firstName="Invalid first name"),e.lastName&&!it(e.lastName)&&(t.lastName="Invalid last name"),t}})(e=>{var{handleSubmit:t,errorMessage:r,pristine:a,invalid:n}=e,o=yt(void 0);return _e.a.createElement("form",{className:o.form,noValidate:!0,onSubmit:t},_e.a.createElement(bt.a,{container:!0,spacing:2},_e.a.createElement(bt.a,{item:!0,xs:12,sm:6},_e.a.createElement(lt.a,{component:ot,autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})),_e.a.createElement(bt.a,{item:!0,xs:12,sm:6},_e.a.createElement(lt.a,{component:ot,variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname"})),_e.a.createElement(bt.a,{item:!0,xs:12},_e.a.createElement(lt.a,{component:ot,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0})),_e.a.createElement(bt.a,{item:!0,xs:12},_e.a.createElement(lt.a,{component:ot,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r&&_e.a.createElement(Ye.a,{component:"span",variant:"caption",color:"error"},r),_e.a.createElement($e.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",className:o.submit,disabled:a||n},"Sign Up"))}),ft=Object(Ke.a)(e=>({"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},submit:{margin:e.spacing(3,0,2)},signInLink:{marginLeft:"auto"}})),ht=()=>{Object(Je.e)();var e=ft(void 0),t=Object(ze.d)(e=>e.auth.signUpErrorMessage),r=Object(ze.c)();return _e.a.createElement(Qe.a,{component:"main",maxWidth:"xs"},_e.a.createElement("div",{className:e.paper},_e.a.createElement(Xe.a,{className:e.avatar},_e.a.createElement(tt.a,null)),_e.a.createElement(Ye.a,{component:"h1",variant:"h5"},"Sign up"),_e.a.createElement(Ot,{errorMessage:t,onSubmit:e=>{r(m.signUp(e))}}),_e.a.createElement($e.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:()=>{window.open("/api/auth/login/google","_self")}},"Sign Up With Google"),_e.a.createElement(et.a,{className:e.signInLink,component:at,to:"/sign-in"},"Already have an account? Sign in")))},jt=r("4LIb"),St=r("Khtv"),vt=r("hA0l"),Et=r("Knny"),wt=r("rRpO"),Dt=r("eI/M"),kt=r("v3Sx"),Pt=r("If6P"),Tt=r("orPf"),xt=r("T+O4"),Ut=r("ptZP"),Nt=r("xj+w"),Ct=r("Ds6T"),Lt=r("0tfv"),Gt=r("hsS1"),It=Object(Ke.a)(e=>Object(Pt.a)({dose:{margin:e.spacing(1),padding:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"space-between"},caption:{display:"flex",alignItems:"center",justifyContent:"space-between"},fab:{position:"fixed",bottom:e.spacing(4),right:e.spacing(4),backgroundColor:e.palette.secondary.main}})),At=()=>{var e=It(void 0),t=Object(ze.c)(),r=Object(ze.d)(e=>e.reminder.nextDrinkTime),a=Object(ze.d)(e=>e.hydration.doses),n=Object(ze.d)(e=>e.auth.loggedIn);return Object(Re.useEffect)(()=>{t($.getDoses()),t($.getHydrationStatistics())},[]),_e.a.createElement(Qe.a,{component:"main",maxWidth:"xs"},r&&_e.a.createElement(Tt.a,{label:Object(Gt.a)(r,"dd.MM.yyyy HH:mm")}),_e.a.createElement("div",null,(a||[]).map(r=>_e.a.createElement(xt.a,{key:r._id,className:e.dose},_e.a.createElement(Ye.a,{component:"span",variant:"subtitle2"},Object(Gt.a)(new Date(r.time),"yyyy.MM.dd (HH:mm)")),_e.a.createElement("div",{className:e.caption},_e.a.createElement(Nt.a,null),_e.a.createElement(Ye.a,{component:"span",variant:"subtitle2"},"".concat(r.volume,"ml"))),_e.a.createElement(Ct.a,{onClick:()=>(e=>t($.deleteDose(e)))(r._id)})))),n&&_e.a.createElement(Ut.a,{onClick:()=>t($.createDose({time:new Date,volume:G.cup})),className:e.fab,color:"secondary"},_e.a.createElement(Lt.a,null)))},Ht=r("uchb"),Mt=r("Xb8q"),Ft=(e=>e=>(e=>e.monthlyStatistics.map(e=>({amount:e.amount/1e3,date:Object(Gt.a)(Object(Mt.a)(e.date),"dd")})))(e.hydration))(),Wt=Object(Ke.a)(()=>Object(Pt.a)({root:{height:"50vh"}})),Rt=()=>{var e=Wt(void 0),t=Object(ze.d)(Ft);return t?Re.createElement(Re.Fragment,null,Re.createElement(Ye.a,{component:"h1",variant:"h5",align:"center"},"Your hydration history for ",Object(Gt.a)(C(),"MMMM")),Re.createElement("div",{className:e.root},Re.createElement(Ht.a,{data:t,keys:["amount"],theme:{axis:{domain:{line:{stroke:"rgba(0, 0, 0, 0.1)"}},ticks:{text:{fontFamily:"Roboto",fontSize:10},line:{stroke:"rgba(0, 0, 0, 0.1)"}}},grid:{line:{stroke:"rgba(0, 0, 0, 0.1)"}}},indexBy:"date",colors:["#3f51b5"],margin:{top:15,right:0,bottom:50,left:25},axisBottom:{tickSize:5,tickPadding:5,tickRotation:-60},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0},labelSkipWidth:20,labelTextColor:"rgba(255, 255, 255, 0.7)",animate:!0,motionStiffness:90,motionDamping:15}))):null},_t=e=>{var{children:t,value:r,index:a}=e,n=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(r=o[a])>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t.indexOf(r=o[a])>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["children","value","index"]);return _e.a.createElement(Ye.a,Object.assign({component:"div",role:"tabpanel",hidden:r!==a},n),r===a&&_e.a.createElement(vt.a,{p:3},t))},qt=Object(Ke.a)(e=>({root:{flexGrow:1,display:"flex",flexFlow:"column nowrap",width:"100%",height:"100%",backgroundColor:e.palette.background.paper},tab:{width:"100%"},tabContent:{flexGrow:1}})),Bt=()=>{var e=qt(void 0),[t,r]=_e.a.useState(0);return _e.a.createElement("div",{className:e.root},_e.a.createElement(St.a,{position:"sticky"},_e.a.createElement(jt.a,null,_e.a.createElement(wt.a,{value:t,classes:{root:e.tab},onChange:(e,t)=>{r(t)},variant:"fullWidth",indicatorColor:"secondary",textColor:"inherit",centered:!0},_e.a.createElement(Et.a,{label:"Drink",icon:_e.a.createElement(Dt.a,null)}),_e.a.createElement(Et.a,{label:"History",icon:_e.a.createElement(kt.a,null)})))),_e.a.createElement(_t,{value:t,index:0},_e.a.createElement(At,null)),_e.a.createElement(_t,{value:t,index:1},_e.a.createElement(Rt,null)))},zt=r("7+K9"),Jt=r("0sjw"),Zt=r("5UhB"),Kt=r("MjIh"),Vt=r("PETZ"),Qt=r("3AAW"),Xt=r("cSkb"),Yt=r("tujD"),$t=r("b2Ya"),er=r("7gyo"),tr=r("M15E"),rr=r("Kg5f"),ar=r("dDbw"),nr=r("yxOy"),or=r("R5r9"),ir=e=>Object(rr.a)(e)+Object(ar.a)(e)/60,sr=e=>{var t=Math.trunc(e),r=60*(e-t);return Object(nr.a)(Object(or.a)(Object(ee.a)(C()),r),t)},cr=(e=>e=>(e=>({awakeTime:sr(e.awakeTime),sleepTime:sr(e.sleepTime)}))(e.settings))();function lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pr=Object(Ke.a)(e=>Object(Pt.a)({list:{width:300}})),mr=e=>{var{children:t,className:r}=e,a=pr(void 0),n=Object(ze.c)(),{awakeTime:o,sleepTime:i}=Object(ze.d)(cr),[s,c]=_e.a.useState({opened:!1}),l=e=>t=>{("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&c(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lr(r,!0).forEach(function(t){ur(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},s,{opened:e}))};return _e.a.createElement(_e.a.Fragment,null,_e.a.createElement(Jt.a,{className:r,onClick:l(!0)},t),_e.a.createElement(Kt.a,{anchor:"right",open:s.opened,onClose:l(!1)},(()=>_e.a.createElement("div",{className:a.list,role:"presentation"},_e.a.createElement(zt.a,null,"Timings settings"),_e.a.createElement(Zt.a,null),_e.a.createElement(Vt.a,null,_e.a.createElement(Qt.a,{button:!0},_e.a.createElement(Xt.a,null,_e.a.createElement($t.a,null)),_e.a.createElement(Yt.a,{primary:_e.a.createElement(_e.a.Fragment,null,_e.a.createElement("span",null,"Awake Time"),_e.a.createElement(tr.a,{value:o,onChange:e=>n(x.setAwakeTime(ir(e)))}))}))),_e.a.createElement(Vt.a,null,_e.a.createElement(Qt.a,{button:!0},_e.a.createElement(Xt.a,null,_e.a.createElement(er.a,null)),_e.a.createElement(Yt.a,{primary:_e.a.createElement(_e.a.Fragment,null,_e.a.createElement("span",null,"Sleep Time"),_e.a.createElement(tr.a,{value:i,onChange:e=>n(x.setSleepTime(ir(e)))}))}))),_e.a.createElement(Zt.a,null)))()))},dr=r("AozH"),gr=Object(Ke.a)(e=>Object(Pt.a)({menuButton:{marginRight:e.spacing(2)},settingsButton:{marginRight:-e.spacing(2)},settingsIcon:{color:e.palette.common.white},title:{flexGrow:1},button:{color:e.palette.text.hint},avatar:{backgroundColor:e.palette.secondary.main,marginLeft:e.spacing(1)}})),br=e=>{var{auth:t}=e,r=Object(ze.c)(),a=gr(void 0),[n]=t.user&&t.user.firstName||"",[o]=t.user&&t.user.lastName||"",i="".concat(n).concat(o).toUpperCase();return _e.a.createElement(St.a,{position:"static"},_e.a.createElement(jt.a,null,_e.a.createElement(Ye.a,{variant:"subtitle1",className:a.title},"Water Reminder App"),t.loggedIn&&_e.a.createElement(_e.a.Fragment,null,_e.a.createElement($e.a,{color:"inherit",onClick:()=>r(m.logout())},"Logout"),t.user.imageUrl&&_e.a.createElement(Xe.a,{alt:t.user.firstName,className:a.avatar,src:t.user.imageUrl}),!t.user.imageUrl&&_e.a.createElement(Xe.a,{alt:t.user.firstName,className:a.avatar},i),_e.a.createElement(mr,{className:a.settingsButton},_e.a.createElement(dr.a,{className:a.settingsIcon}))),!t.loggedIn&&_e.a.createElement($e.a,{component:rt.a,to:"/sign-in",variant:"text",color:"inherit"},"Sign in")))},yr=Object(Ke.a)(()=>({app:{display:"flex",flexFlow:"column nowrap",height:"100vh"},main:{flexGrow:1}})),Or=r("EFHO"),fr=new class{constructor(){this.url="".concat(d,"/notification")}updateStatus(e,t){return Object(S.fromFetch)("".concat(this.url,"/").concat(e),{method:"PATCH",body:JSON.stringify({status:t}),headers:{"Content-Type":"application/json"}}).pipe(h(),Object(v.a)())}};function hr(e,t,r,a,n,o,i){try{var s=e[o](i),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(a,n)}var jr=function(){var e,t=(e=function*(){if("serviceWorker"in navigator){var e=new Or.a("service-worker.js");e.addEventListener("activated",e=>{e.isUpdate?console.log("Service worker activated!"):console.log("Service worker activated for the first time!")}),e.addEventListener("waiting",e=>{console.log("A new service worker has installed, but it can't activateuntil all tabs running the current version have fully unloaded.")}),e.addEventListener("installed",e=>{e.isUpdate?console.log("Service worker installed"):console.log("Service worker installed for the first time")});var[t]=yield function(e){return N.apply(this,arguments)}(e.register());t&&console.log("Service worker registration error",t),navigator.serviceWorker.addEventListener("message",e=>{switch(e.data.type){case"drink-dose":return We.dispatch($.createDose({time:new Date,volume:G.cup}));case"open-notification":return fr.updateStatus(e.data.payload.notificationId,L.opened).subscribe();case"close-notification":return fr.updateStatus(e.data.payload.notificationId,L.closed).subscribe()}})}},function(){var t=this,r=arguments;return new Promise(function(a,n){var o=e.apply(t,r);function i(e){hr(o,a,n,i,s,"next",e)}function s(e){hr(o,a,n,i,s,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}(),Sr=Object(n.a)({palette:{primary:i.a,secondary:s.a,error:c.a,contrastThreshold:3,tonalOffset:.2}});Be.a.render(_e.a.createElement(Je.b,{history:k},_e.a.createElement(ze.a,{store:We},_e.a.createElement(l.a,{theme:Sr},_e.a.createElement(o.a,null),_e.a.createElement(()=>{var e=Object(ze.d)(e=>e.auth),t=Object(ze.c)(),r=yr(void 0);return Object(Re.useEffect)(()=>{t(m.getUser())},[]),_e.a.createElement(Ve.a,{utils:Ze.a},_e.a.createElement("div",{className:r.app},_e.a.createElement(br,{auth:e}),_e.a.createElement("main",{className:r.main},_e.a.createElement(Je.a,{path:"/",exact:!0,render:()=>_e.a.createElement(Bt,null)}),_e.a.createElement(Je.a,{path:"/sign-in",exact:!0,render:()=>_e.a.createElement(gt,null)}),_e.a.createElement(Je.a,{path:"/sign-up",exact:!0,render:()=>_e.a.createElement(ht,null)}))))},null)))),document.getElementById("root")),jr()}},[[0,0,4]]]);